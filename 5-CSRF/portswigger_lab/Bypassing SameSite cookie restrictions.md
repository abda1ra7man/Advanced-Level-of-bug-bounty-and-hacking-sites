## **ุงูุชุญุงูู ุนูู ูููุฏ SameSite ููููููุฒ**

`SameSite` ูู ูููุงููุฒู ุฃูุงู ูู ุงููุชุตูุญุงุช ุจุชุญุฏุฏ ุฅูุชู ุงูููููุฒ ุจุชุชุจุนุช ูู ุงูุทูุจุงุช ุงููู ุฌุงูู ูู ููุงูุน ุชุงููุฉ. ุงููููุฏ ุฏู ุจุชููุฑ **ุญูุงูุฉ ุฌุฒุฆูุฉ** ุถุฏ **ูุฌูุงุช CSRF** ู **ุงูุชุณุฑูุจุงุช ุนุจุฑ ุงูููุงูุน** ูุจุนุถ ุงุณุชุบูุงูุงุช `CORS`.

๐ **ูู 2021ุ ูุชุตูุญ Chrome ุจูุทุจู `Lax` ูุฅุนุฏุงุฏ ุงูุชุฑุงุถู** ูู ุงููููุน ุงููุตุฏุฑ ูููููู ูุด ูุญุฏุฏ ูุณุชูู ุงูุญูุงูุฉ ุจููุณู. ูุฏู ุงูููุฑูุถ ูุจูู ุงููุนูุงุฑ ูู ุงููุชุตูุญุงุช ุงูุชุงููุฉ ูุฑูุจูุง.

## **๐น ุฅูู ูู ุงูู Site ูู ุณูุงู SameSiteุ**

๐น **ุงููููุน (Site)** ุจูุชุญุฏุฏ ุนูู ุฅูู ุงูุฏูููู ุงูุฑุฆูุณู (`TLD+1`) ุฒู `.com` ุฃู `.net` ุฒุงุฆุฏ ูุณุชูู ุฅุถุงูู.

โ **ูุซุงู:**
- `http://app.example.com` ู `https://app.example.com` **ููุนุชุจุฑูุง Cross-Site** ูุฅู ุงูุจุฑูุชูููู (`http` ู `https`) ูุฎุชูู.
- `example.com` ู `app.example.com` **ููุนุชุจุฑูุง Same-Site** ููู ูุด `Same-Origin` ูุฅู ุนูุฏูู ุฏููููุงุช ูุฑุนูุฉ ูุฎุชููุฉ.

## **๐น ุงููุฑู ุจูู Site ู Originุ**

โก **ุงููููุน (Site)** ุจูุดูู ูุทุงูุงุช ูุฑุนูุฉ ูุชูุฑ ุชุญุช ููุณ ุงูุฏูููู.
โก **ุงูุฃุตู (Origin)** ุจูุญุฏุฏ ุจุฑูุชูููู + ุฏูููู + ุจูุฑุช ูุนูู.

๐ **ูุซุงู ุนููู:**
| ุงูุทูุจ ูู | ุงูุทูุจ ุฅูู | Same-Site? | Same-Origin? |
|------------|------------|------------|------------|
| `https://example.com` | `https://example.com` | โ ูุนู | โ ูุนู |
| `https://app.example.com` | `https://intranet.example.com` | โ ูุนู | โ ูุฃ (ุงุฎุชูุงู ุงูุฏูููู ุงููุฑุนู) |
| `https://example.com` | `https://example.com:8080` | โ ูุนู | โ ูุฃ (ุงุฎุชูุงู ุงูุจูุฑุช) |
| `https://example.com` | `https://example.co.uk` | โ ูุฃ (ุงุฎุชูุงู `eTLD`) | โ ูุฃ |
| `https://example.com` | `http://example.com` | โ ูุฃ (ุงุฎุชูุงู ุงูุจุฑูุชูููู) | โ ูุฃ |

๐จ **ุงูููุถูุน ุฏู ููู ูุฅู ุฃู ุซุบุฑุฉ ุจุชุณูุญ ุจุชูููุฐ ุฌุงูุงุณูุฑูุจุช ุนูู ูููุน ูุนูู ูููู ุชูุณุชุฎุฏู ูู ุงูุชุญุงูู ุนูู ูููุฏ `SameSite` ูุงุณุชูุฏุงู ููุงูุน ุชุงููุฉ ุฏุงุฎู ููุณ ุงููุทุงู!**

---

## **๐น ุฅุฒุงู ุจูุดุชุบู SameSiteุ**

ุฒูุงูุ ูุจู ูุง ูููุงููุฒู `SameSite` ูุชุทุจูุ ุงููุชุตูุญุงุช ูุงูุช **ุจุชุจุนุช ุงูููููุฒ ุชููุงุฆููุง ูุน ุฃู ุทูุจ ูููููุน ุงููุตุฏุฑุ ุญุชู ูู ูุงู ุงูุทูุจ ุฌุงู ูู ูููุน ุชุงูุช.**

๐ `SameSite` ุจูุณูุญ ูุฃุตุญุงุจ ุงูููุงูุน **ุจุงูุชุญูู ูู ุงูููููุฒ ุงููู ูููู ุชุชุจุนุช ุนุจุฑ ุงูุทูุจุงุช ุงููู ุฌุงูู ูู ููุงูุน ุชุงููุฉุ ููุง ูููู ูุฑุต ูุฌูุงุช `CSRF`.**

### **๐ธ ูุณุชููุงุช ุงูุญูุงูุฉ ูู SameSite:**

1๏ธโฃ **Strict:** ุงูููููุฒ **ูุด ูุชุชุจุนุช ููุงุฆููุง** ูุน ุฃู ุทูุจ Cross-Site.

2๏ธโฃ **Lax:** ุงูููููุฒ **ูุชุชุจุนุช ุจุณ ูุน ุทูุจุงุช `GET` ุงููุจุงุดุฑุฉ** (ุฒู ููุง ุชุถุบุท ุนูู ูููู).

3๏ธโฃ **None:** ุงูููููุฒ **ูุชุชุจุนุช ูุน ูู ุงูุทูุจุงุช** (ุญุชู ูู ูุงูุช Cross-Site)ุ ููู ูุงุฒู ุชููู `Secure`.

โ **ูุซุงู ุนูู ุชุนููู ููููุฒ ุจููุณู:**
```http
Set-Cookie: session=0F8tgdOhi9ynR1M9wa3ODa; SameSite=Strict
```

๐ **ูู ุงููููุน ูุด ูุญุฏุฏ `SameSite` ุจููุณูุ Chrome ุชููุงุฆููุง ุจูุณุชุฎุฏู `Lax` ูุฅุนุฏุงุฏ ุงูุชุฑุงุถู.**

---

## **๐น ุฅุฒุงู ูุชุญุงูู ุนูู ูููุฏ SameSiteุ**

๐น **ุณููุงุฑูููุงุช ุงูุชุญุงูู ุงูุดุงุฆุนุฉ:**

1๏ธโฃ **ุงุณุชุบูุงู ุงูุฏููููุงุช ุงููุฑุนูุฉ (`subdomains`) ูุฅุนุฏุงุฏ ุงููููู ูู ุงูุถุญูุฉ.**

2๏ธโฃ **ุงุณุชุบูุงู ุฅุฏุฑุงุฌ ูุญุชูู ุนุจุฑ ููุงูุน ุบูุฑ ูุญููุฉ (`iframes, redirects`).**

3๏ธโฃ **ุงุณุชุบูุงู ูุธุงุฆู ุงูุจุญุซ ุฃู ุฃู ูุฏุฎูุงุช ุจุชูุนูุณ ูู `Set-Cookie` ููุถุญูุฉ.**

### **๐น ููุฏ ุงุณุชุบูุงู ุจุณูุท:**
โ **ูุญูู ูููู `csrf` ูุฒูู ูู ูุชุตูุญ ุงูุถุญูุฉ:**
```http
/?search=test%0d%0aSet-Cookie:%20csrf=fake%3b%20SameSite=None
```

โ **ุฃู ุฏูุฌูุง ูู `<img>` ุนุดุงู ูุชู ุชูููุฐูุง ุชููุงุฆููุง:**
```html
<img src="https://YOUR-LAB-ID.web-security-academy.net/?search=test%0d%0aSet-Cookie:%20csrf=fake%3b%20SameSite=None" onerror="document.forms[0].submit();"/>
```

---

๐ **ุจูุฏู ูููู ููููุง `SameSite` ูููุณุ ูุนุฑููุง ุฅุฒุงู ูููู ูุชุญุงูู ุนููู ูู ุญุงูุงุช ุถุนู ุงูุชููุฆุฉ ุงูุฃูููุฉ! ๐ฅ**
